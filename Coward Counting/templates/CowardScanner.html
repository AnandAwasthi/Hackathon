<!DOCTYPE html> 
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
    <title>Crowd Scanner (Infosys Hackathon)</title>

</head>

<body>
    <!-- CSS -->
    <style>
    #my_camera{
        width: 320px;
        height: 240px;
        border: 1px solid black;
    }
	</style>

	<div id="my_camera" style="width: 320px; height: 240px;"><div></div><video autoplay="autoplay" style="width: 320px; height: 240px;"></video></div>
	<input type="button" value="Take Snapshot" onclick="take_snapshot()">
	 
		<script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
	<!-- Webcam.min.js -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/webcamjs/1.0.25/webcam.min.js"></script>

	<!-- Configure a few settings and attach camera -->
	<script language="JavaScript">
		Webcam.set({
			width: 320,
			height: 240,
			image_format: 'jpeg',
			jpeg_quality: 90,
			
		});
		Webcam.attach( '#my_camera' );
	</script>
	<!-- A button for taking snaps -->
	
	<!-- Code to handle taking the snapshot and displaying it locally -->
	<script language="JavaScript">

		function take_snapshot() {
			
			// take snapshot and get image data
			Webcam.snap( function(data_uri) {
				// display results in page
          var img = document.querySelector('img');
          img.src = data_uri;   
			} );
		}
		
	window.addEventListener('load', function() {
  document.querySelector('input[type="file"]').addEventListener('change', function() {
      if (this.files && this.files[0]) {
          var img = document.querySelector('img'); 
          img.src = URL.createObjectURL(this.files[0]);  
      }
  });
});
$(document).ready(function(){

    $("#upload-file-btn").click(function(){ 
		var form_data = new FormData($('#upload-file')[0]);
        $.ajax({
                  url:" http://localhost:5000/upload",
                  type:'POST',
                  data:form_data,
                  cache:false,
                  processData:false,
                  contentType:false,
                  error:function(){
                      console.log("upload error")
                  },
                  success:function(data){
                      console.log(data)
                      console.log("upload success")
                  }
              });
    });
});
	</script>
<form id="upload-file" method="post" enctype="multipart/form-data">
    <fieldset>
        <label for="file">Select a file</label>
        <input name="file" type="file">
    </fieldset>
    <fieldset>
        <button id="upload-file-btn" type="button">Upload</button>
    </fieldset>
</form>
<img id="myImg" src="#" alt="your image"  >

<!-- <input type='file' /> -->

	<!-- <img id="myImg" src="#" alt="your image"  > -->

            <!-- <input type="button" class="button" value="Upload" id="but_upload"> -->
</body></html>